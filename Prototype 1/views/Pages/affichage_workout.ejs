<!DOCTYPE html>
<html lang="en">
<%- include ('../partials/head') %>
<link rel="stylesheet" href="/app.css">


<style>
    
    .card {
    padding: 10px;
    border: 1px solid #ccc;
    height: 70%;
    width: 30%;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    overflow-y: auto; /* Permet le défilement vertical si nécessaire */
    
  }
 
.exercise {
    background: #f7f7f7;
    margin-top: 10px;
    padding: 5px;
    margin-bottom: 5px; /* Ajoute un peu d'espace en bas de chaque exercice */
}

.lesBoutons{
    display: flex;
    flex-direction: row;
}

.workout-list{
  color: white;
}

#workout-list{
  color: white;;
}

body{
  height: 100%;
}

</style>
<body>
    <h1>Liste des Workouts</h1>
    <br><br>
    <button onclick="location.href='?type=template'">Afficher Templates</button>
    <button onclick="location.href='?type=regular'">Afficher Réguliers</button>

    <div id="workout-list">
        <% if (workouts.length > 0) { %>
            <% workouts.forEach(function(workout) { %>
                <div class="card">
                    <h2><%= workout.nom_workout %></h2>
                    <p><%= workout.desc_workout %></p>
                    <p>Durée: <%= workout.dureeSeconde_workout %> secondes</p>
                    <p>Date: <%= workout.date_workout %></p>
                    <% if (workout.exercises && workout.exercises.length > 0) { %>
                        <% workout.exercises.forEach(function(exercise) { %>
                            <div class="exercise">
                                <% if (exercise.series && exercise.series.length > 0) { %>
                                    <% exercise.series.forEach(function(serie) { %>
                                        <h3><%= serie.nom_exo %></h3>
                                        <p><%= serie.reps %> répétitions, RPE: <%= serie.rpe %></p>
                                    <% }); %>
                                <% } else { %>
                                    <p>Aucune série trouvée pour cet exercice.</p>
                                <% } %>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p>Aucun exercice trouvé pour ce workout.</p>
                    <% } %>
                </div>
            <% }); %>
        <% } else { %>
            <p>Aucun workout trouvé.</p>
        <% } %>
    </div>
<
<!--
<script>
        document.getElementById('template-button').addEventListener('click', () => {
          loadWorkouts('template');
        });
      
        document.getElementById('regular-button').addEventListener('click', () => {
          loadWorkouts('regular');
        });
      
        function loadWorkouts(type) {
          fetch(`/workouts/${type}`).then(response => {
            if (!response.ok) {
              throw new Error('Erreur lors de la récupération des workouts');
            }
            return response.json();
          }).then(workouts => {
            const workoutList = document.getElementById('workout-list');
            workoutList.innerHTML = workouts.map(workout => `
              <div class="card">
                <h2>${workout.nom_workout}</h2>
                <p>${workout.desc_workout}</p>
                ${workout.exercises.map(exo => `
                  <div class="exercise">
                    <h4>${exo.nom_exo}</h4>
                    ${exo.series.map(s => `<p>${s.reps}, RPE ${s.rpe}</p>`).join('')}
                  </div>
                `).join('')}
              </div>
            `).join('');
          }).catch(error => {
            console.error('Failed to load workouts:', error);
          });
        }
      </script>
-->
    
</body>
</html>
